<!DOCTYPE html>




 <html class="no-js"> 
<head>
  

<script type="text/javascript">
theBaseUrl = "http://vamp.io/";
</script>
<base href="http://vamp.io/" />

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
  <title>Rancher - Vamp</title>
  <meta name="generator" content="Hugo 0.18-DEV" />

  
  <meta name="description" content="Vamp - Deploy and manage microservices with power and ease.">
  
  <link rel="canonical" href="./documentation/installation/rancher/">
  
  <meta name="author" content="magnetic.io">
  

  <meta property="og:url" content="/documentation/installation/rancher/">
  <meta property="og:title" content="Vamp">
  <meta property="og:image" content="/images/logo.svg">
  <meta name="apple-mobile-web-app-title" content="Vamp">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="shortcut icon" type="image/x-icon" href="./images/logo.svg">
  <link rel="icon" type="image/x-icon" href="./images/logo.svg">


  <style>
    @font-face {
      font-family: 'Icon';
      src: url('fonts/icon.eot?52m981');
      src: url('fonts/icon.eot?#iefix52m981')
      format('embedded-opentype'),
      url('fonts/icon.woff?52m981')
      format('woff'),
      url('fonts/icon.ttf?52m981')
      format('truetype'),
      url('fonts/icon.svg?52m981#icon')
      format('svg');
      font-weight: normal;
      font-style: normal;
    }
  </style>

  <link rel="stylesheet" href="./css/style.css">

  <script src="./js/vendor.js"></script>

  <script src="./js/app.js"></script>

  
</head>
<body class="palette-primary-pink palette-accent-pink">


<div class="single-page">
  <nav aria-label="Header" id="header" class="top-menu">
  <div class="left">
    <a href="./">
      <div id="logo" class="logo"></div>
    </a>
  </div>

  <div class="right">
    <div class="top-menu-items" id="top-menu-items">
      
        <a href="./why-use-vamp/why-use-vamp/" data-parenturl="/why-use-vamp/why-use-vamp/" class="top-menu-item">Why use Vamp?</a>
      
        <a href="./documentation/how-vamp-works/architecture-and-components/" data-parenturl="/documentation/how-vamp-works/architecture-and-components/" class="top-menu-item">Documentation</a>
      
        <a href="./resources/downloads/" data-parenturl="/resources/downloads/" class="top-menu-item">Resources</a>
      
        <a href="./support/" data-parenturl="/support/" class="top-menu-item">Support</a>
      
    </div>

    <div class="download">
      <a href="./documentation/installation/hello-world/" class="button button--red">
        Try Vamp
      </a>
    </div>

    <a href="https://github.com/magneticio/vamp" target="_blank" class="github-logo">
      <i class="fa fa-2x fa-github" aria-hidden="true"></i>
    </a>

    <div class="search-button">
      <i class="fa fa-lg fa-search"></i>
    </div>

  </div>
</nav>

<nav aria-label="Header" id="mobile-header">
  <a href="./" class="logo">
    <img id="logo" class="logo" src="./img/005-vamp/Logo/logo-long-colour.svg" alt="">
  </a>
  <div class="right">
    <a href="https://github.com/magneticio/vamp" target="_blank" class="github-logo">
      <i class="fa fa-lg fa-github" aria-hidden="true"></i>
    </a>
    <div class="hamburger">
      <i class="fa fa-lg fa-bars" aria-hidden="true"></i>
    </div>
  </div>

</nav>

<ul id="mobile-menu">
  
    <li>
      <a href="./why-use-vamp/why-use-vamp/">Why use Vamp?</a>
       <i class="fa fa-chevron-right" aria-hidden="true"></i>
    </li>
    <ul>
    
      <li>
        <a href="./why-use-vamp/why-use-vamp/">Why use Vamp?</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/use-cases/use-cases">Use cases</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./why-use-vamp/use-cases/use-cases/">Use cases</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/create-responsive-website/">Create responsive website</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/resolve-incompatibilities-after-upgrade/">Resolve incompatibilities</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/modernise-architecture/">Mordernise architecture</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/refactor-monolithic-to-microsystems/">Refactor to microservices</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/simulate-and-test-scaling-behaviour/">Simulate and test scaling behaviour</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/self-healing-and-self-optimising/">Self-healing and self-optimising</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/use-cases/service-discovery/">Service discovery</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/vamp-compared-to/proxies-and-load-balancers/">Vamp compared to...</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./why-use-vamp/vamp-compared-to/proxies-and-load-balancers/">Proxies and load balancers</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/vamp-compared-to/paas-and-container-systems/">PaaS and container systems</a>
          </li>
        
          <li>
            <a href="./why-use-vamp/vamp-compared-to/frameworks-and-tools/">Frameworks and tools</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/see-vamp-in-action/">See Vamp in action</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/feature-list/">Feature list</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/enterprise-edition/">Enterprise edition</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./why-use-vamp/get-started/">Get started</a>
        
      </li>
      <ul>
        
      </ul>
    
    </ul>
  
    <li>
      <a href="./documentation/how-vamp-works/architecture-and-components/">Documentation</a>
       <i class="fa fa-chevron-right" aria-hidden="true"></i>
    </li>
    <ul>
    
      <li>
        <a href="./documentation/how-vamp-works/architecture-and-components/">How Vamp works</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/how-vamp-works/architecture-and-components/">Architecture and components</a>
          </li>
        
          <li>
            <a href="./documentation/how-vamp-works/requirements/">Requirements</a>
          </li>
        
          <li>
            <a href="./documentation/how-vamp-works/which-container-scheduler/">Which container scheduler?</a>
          </li>
        
          <li>
            <a href="./documentation/how-vamp-works/service-discovery/">Service discovery</a>
          </li>
        
          <li>
            <a href="./documentation/how-vamp-works/routing-and-load-balancing/">Routing and load balancing</a>
          </li>
        
          <li>
            <a href="./documentation/how-vamp-works/events-and-metrics/">Events and metrics</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./documentation/installation/overview">Installation</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/installation/overview/">Overview</a>
          </li>
        
          <li>
            <a href="./documentation/installation/hello-world/">Hello world</a>
          </li>
        
          <li>
            <a href="./documentation/installation/dcos/">DC/OS 1.7 and 1.8</a>
          </li>
        
          <li>
            <a href="./documentation/installation/mesos-marathon/">Mesos/Marathon</a>
          </li>
        
          <li>
            <a href="./documentation/installation/kubernetes/">Kubernetes 1.x</a>
          </li>
        
          <li>
            <a href="./documentation/installation/rancher/">Rancher</a>
          </li>
        
          <li>
            <a href="./documentation/installation/docker/">Docker</a>
          </li>
        
          <li>
            <a href="./documentation/installation/azure-container-service/">Azure Container Service</a>
          </li>
        
          <li>
            <a href="./documentation/installation/configure-vamp/">Configure Vamp</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./documentation/tutorials/overview">Tutorials</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/tutorials/overview/">Overview</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/deploy-your-first-blueprint/">Deploy your first blueprint</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/run-a-canary-release/">Run a canary release</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/split-a-monolith/">Split a monolith</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/merge-and-delete/">Merge and delete</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/deploy-wordpress-and-mysql/">Run a Wordpress deployment</a>
          </li>
        
          <li>
            <a href="./documentation/tutorials/automate-a-canary-release/">Automate a canary release with rollback</a>
          </li>
        
      </ul>
    
      <li>
        <a href="documentation/using-vamp/artifacts">Using Vamp</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/using-vamp/artifacts/">Artifacts</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/breeds/">Breeds</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/blueprints/">Blueprints</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/deployments/">Deployments</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/environment-variables/">Environment variables</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/gateways/">Gateways</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/conditions/">Conditions</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/events/">Events</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/sla/">SLA (Service Level Agreement)</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/escalations/">Escalations</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/references/">Referencing artifacts</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/workflows/">Workflows</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/sticky-sessions/">Sticky Sessions</a>
          </li>
        
          <li>
            <a href="./documentation/using-vamp/virtual-hosts/">Virtual Hosts</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./documentation/api/api-reference">API</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/api/api-reference/">API Reference</a>
          </li>
        
          <li>
            <a href="./documentation/api/using-the-api/">Using the Vamp API</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./documentation/cli/cli-reference/">CLI</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/cli/cli-reference/">CLI reference</a>
          </li>
        
          <li>
            <a href="./documentation/cli/using-the-cli/">Using the Vamp CLI</a>
          </li>
        
      </ul>
    
      <li>
        <a href="./documentation/release-notes/version-0-9-1/">Release notes</a>
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </li>
      <ul>
        
          <li>
            <a href="./documentation/release-notes/katana/">Katana</a>
          </li>
        
          <li>
            <a href="./documentation/release-notes/version-0-9-1/">Version 0.9.1</a>
          </li>
        
          <li>
            <a href="./documentation/release-notes/version-0-9-0/">Version 0.9.0</a>
          </li>
        
          <li>
            <a href="./documentation/release-notes/older-versions/">Older versions</a>
          </li>
        
      </ul>
    
    </ul>
  
    <li>
      <a href="./resources/downloads/">Resources</a>
       <i class="fa fa-chevron-right" aria-hidden="true"></i>
    </li>
    <ul>
    
      <li>
        <a href="./resources/downloads/">Downloads</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./resources/community/">Community</a>
        
      </li>
      <ul>
        
      </ul>
    
      <li>
        <a href="./resources/news/">News</a>
        
      </li>
      <ul>
        
      </ul>
    
    </ul>
  
    <li>
      <a href="./support/">Support</a>
       
    </li>
    <ul>
    
    </ul>
  
</ul>

<div id="search">
  <div class="search-bar">
    <div class="search-bar__back">
      <i class="fa fa-lg fa-times"></i>
    </div>
    <input class="search-bar__input" placeholder="Type your search here...">
  </div>
  <div class="search-results">
    <ul></ul>
  </div>
</div>


</div>

<div class="page documentation">
    <div class="side-menu" id="side-menu">
    

    
    <ul class="side-menu-list" data-parenturl="/why-use-vamp/why-use-vamp/" style="display: none;">
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/why-use-vamp/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Why use Vamp?</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/use-cases/use-cases" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Use cases</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/vamp-compared-to/proxies-and-load-balancers/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Vamp compared to...</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/see-vamp-in-action/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">See Vamp in action</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/feature-list/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Feature list</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/enterprise-edition/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Enterprise edition</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./why-use-vamp/get-started/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Get started</p>
        </a>

        
      </li>
      
    </ul>
    
    <ul class="side-menu-list" data-parenturl="/documentation/how-vamp-works/architecture-and-components/" style="display: none;">
      
      <li class="side-menu__item">
        <a href="./documentation/how-vamp-works/architecture-and-components/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">How Vamp works</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item active">
        <a href="./documentation/installation/overview" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Installation</p>
        </a>

        
        
        <ul class="side-menu__sub">
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/overview/" class="side-menu__sub__item__text" href="./documentation/installation/overview/" data-url="/documentation/installation/overview/">Overview</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/hello-world/" class="side-menu__sub__item__text" href="./documentation/installation/hello-world/" data-url="/documentation/installation/hello-world/">Hello world</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/dcos/" class="side-menu__sub__item__text" href="./documentation/installation/dcos/" data-url="/documentation/installation/dcos/">DC/OS 1.7 and 1.8</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/mesos-marathon/" class="side-menu__sub__item__text" href="./documentation/installation/mesos-marathon/" data-url="/documentation/installation/mesos-marathon/">Mesos/Marathon</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/kubernetes/" class="side-menu__sub__item__text" href="./documentation/installation/kubernetes/" data-url="/documentation/installation/kubernetes/">Kubernetes 1.x</a>
          </li>
          
          <li class="side-menu__sub__item active">
            <a id="menu-link-/documentation/installation/rancher/" class="side-menu__sub__item__text" href="./documentation/installation/rancher/" data-url="/documentation/installation/rancher/">Rancher</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/docker/" class="side-menu__sub__item__text" href="./documentation/installation/docker/" data-url="/documentation/installation/docker/">Docker</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/azure-container-service/" class="side-menu__sub__item__text" href="./documentation/installation/azure-container-service/" data-url="/documentation/installation/azure-container-service/">Azure Container Service</a>
          </li>
          
          <li class="side-menu__sub__item">
            <a id="menu-link-/documentation/installation/configure-vamp/" class="side-menu__sub__item__text" href="./documentation/installation/configure-vamp/" data-url="/documentation/installation/configure-vamp/">Configure Vamp</a>
          </li>
          
        </ul>
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./documentation/tutorials/overview" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Tutorials</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="documentation/using-vamp/artifacts" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Using Vamp</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./documentation/api/api-reference" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">API</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./documentation/cli/cli-reference/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">CLI</p>
        </a>

        
        
        
      </li>
      
      <li class="side-menu__item">
        <a href="./documentation/release-notes/version-0-9-1/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Release notes</p>
        </a>

        
        
        
      </li>
      
    </ul>
    
    <ul class="side-menu-list" data-parenturl="/resources/downloads/" style="display: none;">
      
      <li class="side-menu__item">
        <a href="./resources/downloads/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Downloads</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./resources/community/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">Community</p>
        </a>

        
      </li>
      
      <li class="side-menu__item">
        <a href="./resources/news/" class="side-menu__item__link">
          <img class="side-menu__item__link__icon" src="./img/003-Small-icons/block-03.svg" alt="">
          <p class="side-menu__item__link__text">News</p>
        </a>

        
      </li>
      
    </ul>
    
    <ul class="side-menu-list" data-parenturl="/support/" style="display: none;">
      
    </ul>
    
    
    
    </div>
    <div class="content">

      <h1 class="content-header">Rancher </h1>

      <div id="versions-dropdown" class="dropdown">
        <div class="dropdown__core">
          <div class="dropdown__selected">
            Selected version
          </div>
          <div class="dropdown__chevon">
            <i class="fa fa-chevron-down" aria-hidden="true"></i>
          </div>
        </div>

        <div class="dropdown__items">

        </div>
      </div>

      <div class="markdowned">
        

<p>This installation will run Vamp together with Consul, Elasticsearch and Logstash on Rancher. (We&rsquo;ll also deploy our demo Sava application to give you something to play around on). Before you begin, it is advisable to try out the official Rancher Quick Start Guide tutorial first (<a href="http://docs.rancher.com/rancher/latest/en/quick-start-guide/">rancher.com - quick start guide</a>).</p>

<div class="admonition note">
  <p class="admonition-title">Note!</p>
  <p>Rancher support is still in Alpha.</p>
</div>

<h4 id="tested-against">Tested against</h4>

<p>This guide has been tested on Rancher version 1.1.x.</p>

<h4 id="requirements">Requirements</h4>

<ul>
<li>Rancher up and running</li>
<li>Key-value store like ZooKeeper, Consul or etcd</li>
<li>Elasticsearch and Logstash</li>
<li>If you want to make a setup on your local VM based Docker, it&rsquo;s advisable to increase default VM memory size from 1GB to 4GB.</li>
</ul>

<h2 id="run-rancher-locally">Run Rancher locally</h2>

<p>Based on the official Rancher quickstart tutorial, these are a few simple steps to run Rancher locally:</p>

<pre><code class="language-bash">$ docker run -d --restart=always -p 8080:8080 rancher/server
</code></pre>

<p>The Rancher UI is exposed on port 8080, so go to <a href="http://SERVER_IP:8080">http://SERVER_IP:8080</a> - for instance <a href="http://192.168.99.100:8080">http://192.168.99.100:8080</a>, <a href="http://localhost:8080">http://localhost:8080</a> or something similar depending on your Docker setup.</p>

<p>Follow the instructions on the screen to add a new Rancher host. Click on &ldquo;Add Host&rdquo; and then on &ldquo;Save&rdquo;. You should get instructions (bullet point 5) to run an <code>agent</code> Docker image:</p>

<pre><code>$ docker run \
  -d --privileged \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v /var/lib/rancher:/var/lib/rancher \
  rancher/agent:v1.0.1 \
  http://192.168.99.100:8080/v1/scripts/E78EF5848B989FD4DA77:1466265600000:SYqIvhPgzKLonp8r0erqgpsi7pQ
</code></pre>

<h2 id="create-a-vamp-stack">Create a Vamp stack</h2>

<p>Next we need to create a Vamp stack. This can be done either from <code>catalog</code> or from scratch (adding all dependencies manually - Consul, Elasticsearch, Logstash).</p>

<h3 id="create-a-vamp-stack-from-catalog">Create a Vamp stack from catalog</h3>

<p>You can create a Vamp stack directly from the Rancher catalog. Just go to <code>Catalog</code>, find the <code>Vamp</code> entry and click the <code>Details</code> button. Now you are ready to <a href="./documentation/installation/rancher/#run-vamp">run Vamp</a></p>

<h3 id="create-a-vamp-stack-from-scratch">Create a Vamp stack from scratch</h3>

<p>If you&rsquo;d rather create a Vamp stack from scratch, our custom Docker image <code>magneticio/elastic:2.2</code> contains Elasticsearch, Logstash and Kibana with the proper Logstash configuration for Vamp. More details can be found on the github project page (<a href="https://github.com/magneticio/elastic">github.com/magneticio - elastic</a>).</p>

<ol>
<li>Go to <code>Add Stack</code> and create a new stack <code>vamp</code> (lowercase).</li>

<li><p>Install Consul:</p>

<ul>
<li>Use the <code>vamp</code> stack and go to <code>Add Service</code>:<br /></li>
<li><code>Name</code> ⇒ <code>consul</code></li>
<li><code>Select Image</code> ⇒ <code>gliderlabs/consul-server</code></li>
<li>Set <code>Command</code> ⇒ <code>-server -bootstrap</code></li>
<li>Go to the <code>Networking</code> tab</li>
<li>Under <code>Hostname</code> select <code>Set a specific hostname:</code> and enter <code>consul</code></li>
<li>Click the <code>Create</code> button</li>
</ul></li>

<li><p>Install Elasticsearch and Logstash:</p>

<ul>
<li>Use the <code>vamp</code> stack and go to <code>Add Service</code>:<br /></li>
<li><code>Name</code> ⇒ <code>elastic</code></li>
<li><code>Select Image</code> ⇒ <code>magneticio/elastic:2.2</code></li>
<li>Go to the <code>Networking</code> tab</li>
<li>Under <code>Hostname</code> select <code>Set a specific hostname:</code> and enter <code>elastic</code></li>
<li>Click <code>Create</code></li>
</ul></li>
</ol>

<h2 id="run-vamp">Run Vamp</h2>

<p>First we&rsquo;ll run the Vamp Gateway Agent:</p>

<ul>
<li>Use the <code>vamp</code> stack and go to <code>Add Service</code>:</li>
<li>Set scale to <code>Always run one instance of this container on every host</code></li>
<li><code>Name</code> ⇒ <code>vamp-gateway-agent</code></li>
<li><code>Select Image</code> ⇒ <code>magneticio/vamp-gateway-agent:0.9.1</code></li>
<li>Set <code>Command</code> ⇒ <code>--storeType=consul --storeConnection=consul:8500 --storeKey=/vamp/gateways/haproxy/1.6 --logstash=elastic:10001</code></li>
<li>Go to <code>Networking</code> tab</li>
<li>Under <code>Hostname</code> select <code>Set a specific hostname:</code> and enter <code>vamp-gateway-agent</code></li>
<li>Click <code>Create</code></li>
</ul>

<p>Now let&rsquo;s find a Rancher API endpoint that can be accessed from running container:</p>

<ul>
<li>Go to the <code>API</code> page and find the endpoint, e.g. <code>http://192.168.99.100:8080/v1/projects/1a5</code></li>
<li>Go to the <code>Infrastructure</code>/<code>Containers</code> and find the IP address of <code>rancher/server</code>, e.g. <code>172.17.0.2</code></li>
<li>The Rancher API endpoint should be then <code>http://IP_ADDRESS:PORT/PATH</code> based on values we have, e.g. <code>http://172.17.0.2:8080/v1/projects/1a5</code></li>
</ul>

<p>Now we can deploy Vamp:</p>

<ul>
<li>Use the <code>vamp</code> stack and go to <code>Add Service</code>:</li>
<li><code>Name</code> ⇒ <code>vamp</code></li>
<li><code>Select Image</code> ⇒ <code>magneticio/vamp:0.9.1-rancher</code></li>
<li>Go to <code>Add environment variable</code> VAMP_CONTAINER_DRIVER_RANCHER_URL with value of Rancher API endpoint, e.g. <code>http://172.17.0.2:8080/v1/projects/1a5</code></li>
<li>(optional) add a <code>VAMP_CONTAINER_DRIVER_RANCHER_USER</code> variable with a <a href="https://docs.rancher.com/rancher/v1.2/zh/api/api-keys/#environment-api-keys">Rancher API access key</a> if your Rancher installation has access control enabled</li>
<li>(optional) add a <code>VAMP_CONTAINER_DRIVER_RANCHER_PASSWORD</code> variable with a matching Rancher API secret key.</li>
<li>Go to <code>Networking</code> tab</li>
<li>Under <code>Hostname</code> select <code>Set a specific hostname:</code> and enter <code>vamp</code></li>
<li>Click <code>Create</code></li>
<li>Go to <code>Add Load Balancer</code> (click arrow next to <code>Add Service</code> button label)</li>
<li>Choose a name (e.g. <code>vamp-lb</code>)</li>
<li><code>Source IP/Port</code> ⇒ 9090</li>
<li><code>Default Target Port</code> ⇒ 8080 and <code>Target Service</code> ⇒ <code>vamp</code></li>
</ul>

<p>If you go to <a href="http://SERVER_IP:9090">http://SERVER_IP:9090</a> (e.g <a href="http://192.168.99.100:9090">http://192.168.99.100:9090</a>), you should get the Vamp UI.  You should also notice that Vamp Gateway Agent is running (one instance on each node) and you can see some <a href="./documentation/using-vamp/workflows/">Vamp workflows</a> running.
The Vamp UI includes mixpanel integration. We monitor data on Vamp usage solely to inform our ongoing product development. Feel free to block this at your firewall, or <a href="contact">contact us</a> if you’d like further details.</p>

<p>To access HAProxy stats, go to <code>Add Load Balancer</code> (click the arrow next to <code>Add Service</code>). Choose a name (e.g. <code>vamp-gateway-agent-lb</code>) and set:</p>

<ul>
<li><code>Source IP/Port</code> ⇒ 1988</li>
<li><code>Default Target Port</code> ⇒ 1988</li>
<li><code>Target Service</code> ⇒ <code>vamp-gateway-agent</code></li>
</ul>

<p>You can access the HAProxy stats page with username/password <code>haproxy</code>.</p>

<h2 id="deploy-the-sava-demo-application">Deploy the Sava demo application</h2>

<p>Let&rsquo;s deploy our <code>sava</code> demo application:</p>

<pre><code class="language-yaml">---
name: sava:1.0
gateways:
  9050: sava/port
clusters:
  sava:
    services:
      breed:
        name: sava:1.0.0
        deployable: magneticio/sava:1.0.0
        ports:
          port: 8080/http
      scale:
        cpu: 0.2
        memory: 64MB
        instances: 1
</code></pre>

<p>If you want the gateway port to be exposed outside of the cluster via a Rancher Load Balancer:</p>

<ol>
<li>Go to <code>Add Load Balancer</code> (click arrow next to <code>Add Service</code>)</li>
<li>Choose name (e.g. <code>gateway-9050</code>),

<ul>
<li><code>Source IP/Port</code> ⇒ 9050</li>
<li><code>Default Target Port</code> ⇒ 9050</li>
<li><code>Target Service</code> ⇒ <code>vamp-gateway-agent</code></li>
</ul></li>
</ol>

<div class="admonition note">
  <p class="admonition-title">What next?</p>
  <p><ul>
<li>Once you have Vamp up and running you can jump into the <a href="./documentation/tutorials/overview">getting started tutorials</a></li>
<li>Things still not running? <a href="https://github.com/magneticio/vamp/issues">We&rsquo;re here to help →</a></li>
<li>Remember, this is not a production grade setup!</li>
</ul>

<p>If you need help you can find us on <a href="https://gitter.im/magneticio/vamp">Gitter</a></p>
</div>

      </div>
    </div>
</div>

<div class="lander-row lander-row--blue footer">
  <div class="container">
    <div class="row">
      <div class="col col-3">
        <h2 class="h2">Learn more</h2>
        <a href="./why-use-vamp/why-use-vamp">
          <p class="text">Why use Vamp?</p>
        </a>
        <a href="./documentation/how-vamp-works/architecture-and-components">
          <p class="text">Documentation</p>
        </a>
        <a href="./about/">
          <p class="text">About us</p>
        </a>
        <a href="./resources/news/">
          <p class="text">News</p>
        </a>
        <a href="./contact/">
          <p class="text">Contact</p>
        </a>
      </div>
        <div class="col col-6">
        <h2 class="h2">All things code</h2>
          <a href="./support/">
            <p class="text">Support</p>
          </a>
          <a href="./resources/community/">
            <p class="text">Community</p>
          </a>
          <a href="https://github.com/magneticio/vamp" target="_blank">
            <p class="text">GitHub</p>
          </a>
          <a href="https://gitter.im/magneticio/vamp" target="_blank">
            <p class="text">Gitter</p>
          </a>
      </div>
      <div class="col col-6">
        <h2 class="h2">Stay up to date</h2>
        <p class="text">
          Leave your email for the latest news: We won’t spam you and won’t go off topic.
        </p>

        <form action="//magnetic.us9.list-manage.com/subscribe/post?u=c709b3ab8cce9e00d617e01b6&amp;id=c1465e21d0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" style="display: inline" target="_blank" novalidate="">
          <div class="input-group">
            <input type="email" name="EMAIL" id="mce-EMAIL" placeholder="Email">
            <a onclick="$(this).closest('form').submit()" class="button button--red not-active">
              <div class="button__icon button__icon--mail">
              </div>
            </a>
          </div>
        </form>

        
          
        


        <div class="social-buttons">
          <p class="text">Follow us on: </p>
          <div class="social-icons">
            <a href="https://twitter.com/vamp_io" target="_blank">
              <i class="fa fa-2x fa-twitter"></i>
            </a>

            <a href="https://www.linkedin.com/company/magnetic-io" target="_blank">
              <i class="fa fa-2x fa-linkedin"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="footer-bottom lander-row--blue">
  <div class="container">
    <div class="part">
      <a href="./about/"><img class="magnetic-logo" src="./img/005-vamp/Logo/magnetic-logo-footer.svg" alt=""></a>
    </div>
    <div class="part">
      <img class="vamp-bat" src="./img/003-Small-icons/Medium-blue/VAMP-Medium.svg" alt="">
      <p class="text">Code licensed under <a type="application/rss+xml" href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2</a> © 2016 <a href="./about/">Magnetic.io</a></p>
    </div>
  </div>
</div>
<script>
$(window).on('load', function() {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59948816-1', 'auto');
  ga('send', 'pageview');
});
</script>

